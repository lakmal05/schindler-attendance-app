// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgres://tbt_database_user:gNjYVNrHAXAJjOatzbsHNbCenzcbrWSP@dpg-cm1v05un7f5s73epf860-a.singapore-postgres.render.com/tbt_database"
}
  //  url      = env("DATABASE_URL")

model Employee {
  id         String       @id
  emp_id     String       @unique
  first_name String
  last_name  String
  type       Type
  nic        String
  contact_no String
  created_at DateTime     @default(now())
  updated_at DateTime     @updatedAt
  user       User?
  attendance Attendance[]
}

model User {
  id          String   @id
  username    String   @unique
  password    String
  employee    Employee @relation(fields: [employee_id], references: [id])
  employee_id String   @unique
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
}

model Attendance {
  id            String       @id
  leader        Employee     @relation(fields: [leader_emp_id], references: [emp_id])
  leader_emp_id String
  member_name   String?
  member_emp_id String?
  // leader_attendance_id String?
  execute_date  DateTime?
  execute_time  String?
  location      String?
  contract_type ContractType
  tool_box_no   String?
  topic         String?
  signature     String?
  created_at    DateTime     @default(now())
  updated_at    DateTime     @updatedAt
  type          Type
}

// model LeaderAttendance {
//   id            String   @id
//   leader_emp_id String
//   type          Type     @default(LEADER)
//   created_at    DateTime @default(now())
//   updated_at    DateTime @updatedAt
// }

enum ContractType {
  EMP
  SUBCON
}

enum Type {
  LEADER
  MEMBER
}
